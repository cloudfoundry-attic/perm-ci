- type: replace
  path: /instance_groups/-
  value:
    name: capi-perm-migrator
    instances: 1
    azs: [z1]
    lifecycle: errand
    vm_type: minimal
    stemcell: default
    networks:
    - name: default
    jobs:
    - name: cc-to-perm-migrator
      release: perm
      properties:
        uaa:
          url: https://uaa.((system_domain))
          ca_certs:
          - ((router_ssl.ca))

        cloud_controller:
          url: https://api.((system_domain))
          client_id: cloud-controller-monitor
          client_secret: ((perm/uaa_clients_cloud_controller_monitor_secret))
          client_scopes:
          - cloud_controller.admin_read_only

        perm:
          ca_certs:
          - ((perm/tls.ca))

- type: replace
  path: /instance_groups/name=uaa/jobs/name=uaa/properties/uaa?/clients/cloud-controller-monitor?
  value:
    authorities: cloud_controller.admin_read_only
    authorized-grant-types: client_credentials
    secret: ((perm/uaa_clients_cloud_controller_monitor_secret))

- type: replace
  path: /variables/-
  value:
    name: perm/uaa_clients_cloud_controller_monitor_secret
    type: password
